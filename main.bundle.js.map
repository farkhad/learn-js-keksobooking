{"version":3,"file":"main.bundle.js","mappings":"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","sources":["webpack://keksobooking/./source/js/avatar.js","webpack://keksobooking/webpack/bootstrap","webpack://keksobooking/./source/js/util.js","webpack://keksobooking/./source/js/modal.js","webpack://keksobooking/./source/js/api.js","webpack://keksobooking/./source/js/form.js","webpack://keksobooking/./source/js/card.js","webpack://keksobooking/./source/js/map.js"],"sourcesContent":["const FILE_TYPES = ['gif', 'jpg', 'jpeg', 'png'];\n\nconst avatarChooser = document.querySelector('#avatar');\nconst avatarPreview = document.querySelector('.ad-form-header__preview img');\n\nconst photoChooser = document.querySelector('#images');\nconst photoContainer = document.querySelector('.ad-form__photo-container .ad-form__photo');\n\nconst checkFile = (file) => {\n  const fileName = file.name.toLowerCase();\n  return FILE_TYPES.some((ext) => fileName.endsWith(ext));\n};\n\navatarChooser.addEventListener('change', () => {\n  const file = avatarChooser.files[0];\n  if (checkFile(file)) {\n    const reader = new FileReader();\n\n    reader.addEventListener('load', () => {\n      avatarPreview.src = reader.result;\n    });\n\n    reader.readAsDataURL(file);\n  }\n});\n\nphotoChooser.addEventListener('change', () => {\n  const file = photoChooser.files[0];\n  if (checkFile(file)) {\n    const reader = new FileReader();\n\n    reader.addEventListener('load', () => {\n      const img = document.createElement('img');\n      img.src = reader.result;\n      img.width = 70;\n      img.height = 70;\n      img.alt = 'Фотография жилья';\n      photoContainer.appendChild(img);\n    });\n\n    reader.readAsDataURL(file);\n  }\n});\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const THOUSANDS_SEPARATOR = ' ';\n\nconst DEFAULT_DEBOUNCE_DELAY = 100;\n\n/**\n * Возвращает случайное целое число из переданного диапазона включительно\n * Решение https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random#getting_a_random_integer_between_two_values_inclusive\n *\n * @param int min\n * @param int max\n * @returns int\n */\nconst getRandomInt = (min, max) => {\n  if (min < 0 || max < 0) {\n    return -1;\n  }\n\n  min = Math.ceil(min);\n  max = Math.floor(max);\n\n  if (max < min) {\n    [min, max] = [max, min];\n  }\n\n  return Math.floor(Math.random() * (max - min + 1) + min); //The maximum is inclusive and the minimum is inclusive\n}\n\n/**\n * Возвращает случайное число с плавающей точкой с указанным кол-вом знаков\n * после запятой из переданного диапазона включительно.\n * Решение\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random#getting_a_random_number_between_two_values\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/toFixed\n * https://stackoverflow.com/questions/1527803/generating-random-whole-numbers-in-javascript-in-a-specific-range\n * https://discord.com/channels/874632952691191838/874638732140101662/939926374863474729\n *\n * @param int min\n * @param int max\n * @param int precision\n * @returns float\n */\nconst getRandomFloat = (min, max, precision = 0) => {\n  if (min < 0 || max < 0) {\n    return -1;\n  }\n\n  if (precision === 0) {\n    const coef = 10 ** precision;\n    max = Math.floor(max * coef) / coef;\n    min = Math.ceil(min * coef) / coef;\n  }\n\n  if (max < min) {\n    [min, max] = [max, min];\n  }\n\n  return Number((Math.random() * (max - min) + min).toFixed(precision));\n};\n\n/**\n * Получить случайный элемент массива\n *\n * @param array randomArray\n * @returns mixed\n */\nconst getRandomArrayElement = (arr) => arr[getRandomInt(0, arr.length - 1)];\n\n/**\n * Formats number with enclosed thousands separator\n * https://stackoverflow.com/questions/2901102/how-to-print-a-number-with-commas-as-thousands-separators-in-javascript\n *\n * @param Number x\n * @param String sep\n * @returns String\n */\nconst formatNumber = (x, sep = THOUSANDS_SEPARATOR) => {\n  return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, sep);\n}\n\n/**\n * Checks if key pressed was Escape button\n *\n * @param Event evt\n * @returns Boolean\n */\nconst isEscEvent = (evt) => {\n  return evt.key === 'Escape' || evt.key === 'Esc';\n};\n\n/**\n *\n * @param Function cb\n * @param Number timeout\n * @returns\n */\nconst debounce = (cb, timeout = DEFAULT_DEBOUNCE_DELAY) => {\n  let timeoutId;\n  return (...args) => {\n    // Задержка реализуется с помощью setTimeout\n    // Если вызов произошёл до окончания задержки, таймер начинает отсчёт заново\n    const delayed = () => {\n      cb(...args);\n      timeoutId = null;\n    }\n\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n    timeoutId = setTimeout(delayed, timeout);\n  };\n};\n\nexport { getRandomInt, getRandomFloat, getRandomArrayElement, formatNumber, isEscEvent, debounce };\n","import { isEscEvent } from './util.js';\n\nconst ModalType = {\n  SUCCESS: 'success',\n  ERROR: 'error',\n};\n\nlet currentModal;\n\nconst modalKeydownHandler = (evt) => {\n  if (isEscEvent(evt)) {\n    evt.preventDefault();\n    closeModal();\n  }\n}\n\nconst modalClickHandler = () => closeModal();\n\nconst openModal = (modalType = ModalType.SUCCESS) => {\n  const modal = document.querySelector(`#${modalType}`).content\n    .querySelector(`.${modalType}`).cloneNode(true);\n\n  document.body.appendChild(modal);\n\n  currentModal = modal;\n\n  document.addEventListener('keydown', modalKeydownHandler);\n  document.addEventListener('click', modalClickHandler);\n\n  if (modalType === ModalType.ERROR) {\n    modal.querySelector(`.${modalType}__button`).addEventListener('click', modalClickHandler);\n  }\n}\n\nconst closeModal = () => {\n  if (currentModal.className === ModalType.ERROR) {\n    currentModal.querySelector(`.${ModalType.ERROR}__button`).removeEventListener('click', modalClickHandler);\n  }\n  currentModal.remove();\n\n  document.removeEventListener('keydown', modalKeydownHandler);\n  document.removeEventListener('click', modalClickHandler);\n};\n\nconst openModalSuccess = () => openModal(ModalType.SUCCESS);\nconst openModalError = () => openModal(ModalType.ERROR);\n\nexport { openModalSuccess, openModalError };\n","const GET_DATA_URL = 'https://23.javascript.pages.academy/keksobooking/data';\nconst SEND_DATA_URL = 'https://23.javascript.pages.academy/keksobooking';\nconst ERR_DATA_NOT_LOADED = 'Произошла ошибка. Объявления не были загружены.';\n\nconst getData = (onSuccess, onError) => fetch(GET_DATA_URL).then((response) => {\n  if (response.ok) {\n    return response.json();\n  }\n  onError(ERR_DATA_NOT_LOADED);\n}).then((json) => onSuccess(json)).catch(() => onError(ERR_DATA_NOT_LOADED));\n\nconst sendData = (onSuccess, onError, body) => {\n  fetch(SEND_DATA_URL, {\n    method: 'POST',\n    body,\n  },\n  ).then((response) => {\n    if (response.ok) {\n      onSuccess();\n    } else {\n      onError();\n    }\n  }).catch(onError);\n};\n\nexport { getData, sendData };\n","import './avatar.js';\nimport { sendData } from './api.js';\nimport { formatNumber } from './util.js';\n\nconst ERR_REQUIRED_FIELD = 'Пожалуйста, заполните это поле';\nconst ERR_LENGTHEN = 'Пожалуйста, удлините этот текст до {MIN_LEN} или {MAX_LEN} символов (в настоящее время вы используете {CUR_LEN} симв.).';\nconst ERR_PRICE_LOW = 'Значение должно быть больше или равно {MIN_PRICE}';\nconst ERR_PRICE_HIGH = 'Значение должно быть меньше или равно {MAX_PRICE}';\n\nconst Title = {\n  MIN_LEN: 30,\n  MAX_LEN: 100,\n  MIN_LEN_PLACEHOLDER: '{MIN_LEN}',\n  MAX_LEN_PLACEHOLDER: '{MAX_LEN}',\n  CUR_LEN_PLACEHOLDER: '{CUR_LEN}',\n};\n\nconst Price = {\n  MIN: 0,\n  MAX: 1000000,\n  MIN_PLACEHOLDER: '{MIN_PRICE}',\n  MAX_PLACEHOLDER: '{MAX_PRICE}',\n};\n\nconst priceMap = {\n  bungalow: 0,\n  flat: 1000,\n  house: 5000,\n  palace: 10000,\n};\n\nconst Capacity = {\n  1: [1],\n  2: [1, 2],\n  3: [1, 2, 3],\n  NO_GUESTS: [0],\n  ERR_CAPACITY: `1 комната — «для 1 гостя»;\n  2 комнаты — «для 2 гостей» или «для 1 гостя»;\n  3 комнаты — «для 3 гостей», «для 2 гостей» или «для 1 гостя»;\n  100 комнат — «не для гостей»`,\n};\n\nconst adForm = document.querySelector('.ad-form');\nconst titleField = adForm.querySelector('#title');\nconst housingTypeField = adForm.querySelector('#type');\nconst priceField = adForm.querySelector('#price');\nconst timeInField = adForm.querySelector('#timein');\nconst timeOutField = adForm.querySelector('#timeout');\nconst roomsField = adForm.querySelector('#room_number');\nconst guestsField = adForm.querySelector('#capacity');\n\nlet maxPrice = Price.MAX;\nif (maxPrice > priceField.max) {\n  maxPrice = priceField.max;\n}\n\nlet minPrice = Price.MIN;\nif (priceField.min < minPrice) {\n  minPrice = priceField.min;\n}\n\n/**\n * Updates minimal price for relevant housing type\n */\nconst updateMinPrice = () => {\n  minPrice = priceMap[housingTypeField.value];\n  priceField.placeholder = formatNumber(minPrice);\n  priceField.min = minPrice;\n};\n\n/**\n * Synchronizes Check In/Out fields\n *\n * @param HTMLSelectElement timeFieldChanged\n * @param HTMLSelectElement timeFieldToChange\n */\nconst syncTimeInOut = (timeFieldChanged = timeInField, timeFieldToChange = timeOutField) => {\n  // HTMLOptionsCollection\n  for (let timeToChangeOption of timeFieldToChange.options) {\n    timeToChangeOption.selected = (timeFieldChanged.value === timeToChangeOption.value);\n  }\n};\n\n/**\n * Checks whether Guests number is within limits for Rooms number\n *\n * @returns Boolean\n */\nconst checkCapacity = () => {\n  const roomsNumber = Number(roomsField.options[roomsField.selectedIndex].value);\n  const allowedCapacity = Capacity[roomsNumber] || Capacity.NO_GUESTS;\n  const capacity = Number(guestsField.options[guestsField.selectedIndex].value);\n\n  return allowedCapacity.includes(capacity);\n};\n\n/**\n * Returns error message for Number Of Guests field if exists\n *\n * @returns String\n */\nconst getCapacityErrorMessage = () => {\n  return checkCapacity() ? '' : Capacity.ERR_CAPACITY;\n};\n\n/**\n * Returns error message for Title field if exists\n *\n * @returns String\n */\nconst getTitleErrorMessage = () => {\n  const validity = titleField.validity;\n\n  let errorMessage = '';\n\n  if (validity.valueMissing) {\n    errorMessage = ERR_REQUIRED_FIELD;\n  } else if (validity.tooShort) {\n    errorMessage = ERR_LENGTHEN\n      .replace(Title.MIN_LEN_PLACEHOLDER, Title.MIN_LEN)\n      .replace(Title.MAX_LEN_PLACEHOLDER, Title.MAX_LEN)\n      .replace(Title.CUR_LEN_PLACEHOLDER, titleField.value.length);\n  }\n\n  return errorMessage;\n};\n\n/**\n * Returns error message for Price field if exists\n *\n * @returns String\n */\nconst getPriceErrorMessage = () => {\n  const validity = priceField.validity;\n  let errorMessage = '';\n\n  if (validity.valueMissing) {\n    errorMessage = ERR_REQUIRED_FIELD;\n  } else if (validity.rangeUnderflow) {\n    errorMessage = ERR_PRICE_LOW.replace(Price.MIN_PLACEHOLDER, formatNumber(minPrice));\n  } else if (validity.rangeOverflow) {\n    errorMessage = ERR_PRICE_HIGH.replace(Price.MAX_PLACEHOLDER, formatNumber(maxPrice));\n  }\n\n  return errorMessage;\n};\n\nconst getCustomErrorMessage = (field) => {\n  let errorMessage = '';\n\n  switch (field) {\n    case titleField:\n      errorMessage = getTitleErrorMessage();\n      break;\n\n    case priceField:\n      errorMessage = getPriceErrorMessage();\n      break;\n\n    case guestsField:\n      errorMessage = getCapacityErrorMessage();\n      break;\n\n    default:\n      errorMessage = 'unknown error';\n  }\n\n  return errorMessage;\n};\n\nconst inputHandler = (evt) => evt.target.reportValidity();\nconst invalidHandler = (evt) => evt.target.setCustomValidity(getCustomErrorMessage(evt.target));\n\nconst titleInputHandler = inputHandler;\nconst titleInvalidHandler = invalidHandler;\n\n/**\n * Callback for onChange event on housing type field\n */\nconst housingTypeChangeHandler = () => {\n  updateMinPrice();\n  priceField.reportValidity();\n}\n\nconst priceInputHandler = inputHandler;\nconst priceInvalidHandler = invalidHandler;\n\n/**\n * Callback for 'change' event of Rooms number field\n * Explicitly setting custom error message at 'change' event,\n * since guestField doesn't have validation rules present in HTML-tag\n */\nconst roomsChangeHandler = () => {\n  guestsField.setCustomValidity(getCustomErrorMessage(guestsField));\n  guestsField.reportValidity();\n};\nconst guestsChangeHandler = () => {\n  guestsField.setCustomValidity(getCustomErrorMessage(guestsField));\n  guestsField.reportValidity();\n};\nconst guestsInvalidHandler = invalidHandler;\n\n/**\n * Callback for Check In field's onChange event\n */\nconst timeInChangeHandler = () => syncTimeInOut();\n\n/**\n * Callback for Check Out field's onChange event\n */\nconst timeOutChangeHandler = () => syncTimeInOut(timeOutField, timeInField);\n\n/**\n * Set Advertisement Form's event listeners\n */\nconst setAdFormListeners = () => {\n  updateMinPrice();\n\n  titleField.addEventListener('input', titleInputHandler);\n  titleField.addEventListener('invalid', titleInvalidHandler);\n\n  housingTypeField.addEventListener('change', housingTypeChangeHandler);\n  priceField.addEventListener('input', priceInputHandler);\n  priceField.addEventListener('invalid', priceInvalidHandler);\n\n  roomsField.addEventListener('change', roomsChangeHandler);\n  guestsField.addEventListener('change', guestsChangeHandler);\n  guestsField.addEventListener('invalid', guestsInvalidHandler);\n\n  timeInField.addEventListener('change', timeInChangeHandler);\n  timeOutField.addEventListener('change', timeOutChangeHandler);\n};\n\nconst setAdFormSubmit = (onSuccess, onError) => {\n  adForm.addEventListener('submit', (evt) => {\n    evt.preventDefault();\n\n    sendData(onSuccess, onError, new FormData(adForm));\n  });\n};\n\nexport { setAdFormSubmit, setAdFormListeners, Price };\n","import { formatNumber } from './util.js';\nconst PRICE_DESCRIPTION = '₽/ночь';\n\nconst housingType = {\n  palace: 'Дворец',\n  flat: 'Квартира',\n  house: 'Дом',\n  bungalow: 'Бунгало',\n};\n\nconst cardTemplate = document.querySelector('#card').content.querySelector('.popup');\n\nconst priceDescription = document.createElement('span');\npriceDescription.textContent = ` ${PRICE_DESCRIPTION}`;\n\nconst hideElement = (element) => element.classList.add('hidden');\n\n/**\n * Renders advertisment from html template\n *\n * @param Object ad\n * @returns Element\n */\nconst renderAd = (ad) => {\n  const card = cardTemplate.cloneNode(true);\n\n  const price = card.querySelector('.popup__text--price');\n\n  const featuresList = card.querySelector('.popup__features');\n  const features = featuresList.querySelectorAll('.popup__feature');\n\n  const photos = card.querySelector('.popup__photos');\n  const photoTemplate = photos.querySelector('.popup__photo');\n  const photosFragment = document.createDocumentFragment();\n\n  const title = card.querySelector('.popup__title');\n  const address = card.querySelector('.popup__text--address');\n  const type = card.querySelector('.popup__type');\n  const capacity = card.querySelector('.popup__text--capacity');\n  const time = card.querySelector('.popup__text--time');\n  const description = card.querySelector('.popup__description');\n  const avatar = card.querySelector('.popup__avatar');\n\n  if (ad.offer.title) {\n    title.textContent = ad.offer.title;\n  } else {\n    hideElement(title);\n  }\n\n  if (ad.offer.address) {\n    address.textContent = ad.offer.address;\n  } else {\n    hideElement(address);\n  }\n\n  if ('price' in ad.offer) {\n    // Б27. Для вставки пользовательских строк (имён, фамилий и так далее) использован textContent\n    price.textContent = formatNumber(ad.offer.price);\n    price.appendChild(priceDescription.cloneNode(true));\n  } else {\n    hideElement(price);\n  }\n\n  if (ad.offer.type) {\n    type.textContent = housingType[ad.offer.type];\n  } else {\n    hideElement(type);\n  }\n\n  if (ad.offer.rooms || ad.offer.guests) {\n    capacity.textContent = `${ad.offer.rooms} комнаты для ${ad.offer.guests} гостей`;\n  } else {\n    hideElement(capacity);\n  }\n\n  if (ad.offer.checkin || ad.offer.checkout) {\n    time.textContent = `Заезд после ${ad.offer.checkin}, выезд до ${ad.offer.checkout}`;\n  } else {\n    hideElement(time);\n  }\n\n  if (ad.offer.features && ad.offer.features.length) {\n    features.forEach((feature) => hideElement(feature));\n    ad.offer.features.forEach((feature) => card.querySelector(`.popup__feature--${feature}`).classList.remove('hidden'));\n  } else {\n    hideElement(featuresList);\n  }\n\n  if (ad.offer.description) {\n    description.textContent = ad.offer.description;\n  } else {\n    hideElement(description);\n  }\n\n  if (ad.offer.photos && ad.offer.photos.length) {\n    ad.offer.photos.forEach((photoUrl) => {\n      const photo = photoTemplate.cloneNode(false);\n      photo.src = photoUrl;\n      photosFragment.appendChild(photo);\n    });\n    photoTemplate.remove();\n    photos.appendChild(photosFragment);\n  } else {\n    hideElement(photos);\n  }\n\n  if (ad.author.avatar) {\n    avatar.src = ad.author.avatar;\n  } else {\n    hideElement(avatar);\n  }\n\n  return card;\n};\n\n/**\n * Renders advertisements\n *\n * @param Array ads\n * @returns DocumentFragment\n */\nconst renderAds = (ads = []) => {\n  const cardsFragment = document.createDocumentFragment();\n\n  ads.forEach((ad) => cardsFragment.appendChild(renderAd(ad)));\n\n  priceDescription.remove();\n\n  return cardsFragment;\n};\n\nexport { renderAd, renderAds };\n","import { openModalSuccess, openModalError } from './modal.js';\nimport { setAdFormSubmit, setAdFormListeners, Price } from './form.js';\nimport { renderAd } from './card.js';\nimport { getData } from './api.js';\nimport { debounce } from './util.js';\n\nconst ALERT_SHOW_TIME = 5000;\nconst DEBOUNCE_DELAY = 500;\nconst AD_COUNT = 10;\n\nconst MapConfig = {\n  TOKYO: [35.658581, 139.745438],\n  MAX_ZOOM_LEVEL: 10,\n  CANVAS_ID: 'map-canvas',\n\n  MAIN_PIN_URL: 'img/main-pin.svg',\n  MAIN_ICON_SIZE: [52, 52],\n  MAIN_ICON_ANCHOR: [26, 52],\n\n  PIN_URL: 'img/pin.svg',\n  ICON_SIZE: [40, 40],\n  ICON_ANCHOR: [20, 40],\n\n  PRECISION: 5,\n}\n\nconst FILTER_FIELD_ANY_VALUE = 'any';\nconst DEFAULT_FILTER_CB = () => true;\n\nconst FilterId = {\n  TYPE: 'housing-type',\n  PRICE: 'housing-price',\n  ROOMS: 'housing-rooms',\n  GUESTS: 'housing-guests',\n  FEATURES: 'housing-features',\n};\n\nconst filterAdBy = {\n  [FilterId.TYPE]: DEFAULT_FILTER_CB,\n  [FilterId.PRICE]: DEFAULT_FILTER_CB,\n  [FilterId.ROOMS]: DEFAULT_FILTER_CB,\n  [FilterId.GUESTS]: DEFAULT_FILTER_CB,\n  [FilterId.FEATURES]: DEFAULT_FILTER_CB,\n};\n\nconst filterIds = Object.values(FilterId);\n\nconst priceTypeToRange = {\n  'low': [Price.MIN, 10000],\n  'middle': [10000, 50000],\n  'high': [50000, Price.MAX],\n};\n\nconst adForm = document.querySelector('.ad-form');\nconst filterForm = document.querySelector('.map__filters');\nconst addrField = adForm.querySelector('#address');\nconst resetButton = adForm.querySelector('.ad-form__reset');\nconst featureFields = filterForm.querySelectorAll('.map__features .map__checkbox');\n\nconst mainPinIcon = L.icon({\n  iconUrl: MapConfig.MAIN_PIN_URL,\n  iconSize: MapConfig.MAIN_ICON_SIZE,\n  iconAnchor: MapConfig.MAIN_ICON_ANCHOR,\n});\n\nconst mainPinMarker = L.marker(MapConfig.TOKYO, {\n  icon: mainPinIcon,\n  draggable: true,\n});\n\nconst pinIcon = L.icon({\n  iconUrl: MapConfig.PIN_URL,\n  iconSize: MapConfig.ICON_SIZE,\n  iconAnchor: MapConfig.ICON_ANCHOR,\n});\n\nlet map;\nlet pinLayerGroup;\n\n/**\n * https://up.htmlacademy.ru/profession/frontender-lite/1/lite-javascript/1/demos/5825#18\n *\n * @param String message\n */\nconst showAlert = (message) => {\n  const alertContainer = document.createElement('div');\n  alertContainer.style.zIndex = 100;\n  alertContainer.style.position = 'absolute';\n  alertContainer.style.left = 0;\n  alertContainer.style.top = 0;\n  alertContainer.style.right = 0;\n  alertContainer.style.padding = '10px 3px';\n  alertContainer.style.fontSize = '30px';\n  alertContainer.style.textAlign = 'center';\n  alertContainer.style.backgroundColor = 'red';\n\n  alertContainer.textContent = message;\n\n  document.body.append(alertContainer);\n\n  setTimeout(() => alertContainer.remove(), ALERT_SHOW_TIME);\n}\n\n/**\n * Set Ad Form's interactive elements to disabled/enabled\n *\n * @param Boolean isDisabled\n */\nconst setAdFormDisabledTo = (isDisabled = true) => {\n  if (isDisabled) {\n    adForm.classList.add('ad-form--disabled');\n  } else {\n    adForm.classList.remove('ad-form--disabled');\n  }\n  adForm.querySelector('.ad-form-header').disabled = isDisabled;\n  adForm.querySelectorAll('.ad-form__element').forEach((element) => element.disabled = isDisabled);\n};\n\n/**\n * Set Map Filter Form's elements to disabled/enabled\n *\n * @param Boolean isDisabled\n */\nconst setFilterFormDisabledTo = (isDisabled = true) => {\n  if (isDisabled) {\n    filterForm.classList.add('map__filters--disabled');\n  } else {\n    filterForm.classList.remove('map__filters--disabled');\n  }\n  filterForm.querySelector('.map__features').disabled = isDisabled;\n  filterForm.querySelectorAll('.map__filter').forEach((element) => element.disabled = isDisabled);\n};\n\nconst setAddress = (addr = MapConfig.TOKYO) => addrField.value = addr.join(', ');\n\n/**\n * Callback for event fired on map load by LeafLet lib\n */\nconst mapLoadHandler = () => {\n  initMainPinMarker();\n\n  setAdFormDisabledTo(false);\n\n  initPinMarkers();\n};\n\n/**\n * Callback for 'moveend' event fired on main pin marker by Leaflet\n *\n * @param Object evt\n */\nconst mainPinMarkerMoveEndHandler = (evt) => {\n  const targetCoords = evt.target.getLatLng();\n  setAddress([targetCoords.lat.toFixed(MapConfig.PRECISION), targetCoords.lng.toFixed(MapConfig.PRECISION)]);\n};\n\n/**\n * Initialize LeafLet map\n */\nconst initMap = () => {\n  setAdFormDisabledTo(true);\n  setFilterFormDisabledTo(true);\n\n  map = L.map(MapConfig.CANVAS_ID);\n  map.on('load', mapLoadHandler);\n  map.setView(MapConfig.TOKYO, MapConfig.MAX_ZOOM_LEVEL);\n\n  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n    attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n  }).addTo(map);\n};\n\n/**\n * Устанавливает главную метку на карту\n */\nconst initMainPinMarker = () => {\n  mainPinMarker.addTo(map);\n  mainPinMarker.on('moveend', mainPinMarkerMoveEndHandler);\n\n  setAddress(MapConfig.TOKYO);\n};\n\nconst filterAd = (ad) => filterIds.every((filterId) => filterAdBy[filterId](ad));\n\nconst showPinMarkers = (ads) => {\n  if (pinLayerGroup) {\n    pinLayerGroup.clearLayers();\n  } else {\n    pinLayerGroup = L.layerGroup();\n  }\n\n  ads\n    .filter(filterAd)\n    .slice(0, AD_COUNT)\n    .forEach((ad) => {\n      const pinMarker = L.marker([ad.location.lat, ad.location.lng], { icon: pinIcon });\n      pinMarker.bindPopup(renderAd(ad));\n\n      pinLayerGroup.addLayer(pinMarker);\n    });\n\n  pinLayerGroup.addTo(map);\n};\n\nconst createFilterCb = (filterId, filterValue) => {\n  let cb = DEFAULT_FILTER_CB;\n\n  if (filterValue === FILTER_FIELD_ANY_VALUE) {\n    return cb;\n  }\n\n  switch (filterId) {\n    case FilterId.TYPE:\n      cb = ({offer}) => offer.type === filterValue;\n      break;\n\n    case FilterId.PRICE:\n      if (filterValue in priceTypeToRange) {\n        cb = ({offer}) => {\n          return offer.price >= priceTypeToRange[filterValue][0]\n            && offer.price < priceTypeToRange[filterValue][1];\n        }\n      }\n      break;\n\n    case FilterId.ROOMS:\n      cb = ({offer}) => offer.rooms === Number(filterValue);\n      break;\n\n    case FilterId.GUESTS:\n      cb = ({offer}) => offer.guests === Number(filterValue);\n      break;\n\n    case FilterId.FEATURES:\n      // filterValue = [feature1, feature2, ..., featureN];\n      cb = ({offer}) => {\n        try {\n          return filterValue.every((feature) => offer.features.includes(feature));\n        } catch (err) {\n          // ! ('features' in offer)\n        }\n        return false;\n      }\n      break;\n  }\n\n  return cb;\n};\n\nconst getFeaturesChecked = () => {\n  const filterValues = [];\n  for (const featureField of featureFields) {\n    if (featureField.checked) {\n      filterValues.push(featureField.value);\n    }\n  }\n  return filterValues;\n}\n\nconst resetFilters = () => filterIds.forEach((filterId) => filterAdBy[filterId] = DEFAULT_FILTER_CB);\n\nconst updateFilter = (evt) => {\n  let filterId;\n  let filterValue;\n\n  if (evt.target.type === 'checkbox') {\n    // checkbox\n    filterId = FilterId.FEATURES;\n    filterValue = getFeaturesChecked();\n  } else {\n    // select\n    filterId = evt.target.id;\n    filterValue = evt.target.options[evt.target.selectedIndex].value;\n  }\n\n  filterAdBy[filterId] = createFilterCb(filterId, filterValue);\n}\n\nconst initPinMarkers = () => {\n  getData((ads) => {\n    showPinMarkers(ads);\n\n    setFilterFormDisabledTo(false);\n\n    filterForm.addEventListener('reset', () => {\n      resetFilters();\n      showPinMarkers(ads);\n    });\n\n    filterForm.addEventListener('change', debounce(\n      (evt) => {\n        map.closePopup();\n        updateFilter(evt);\n        showPinMarkers(ads);\n      }, DEBOUNCE_DELAY));\n  }, showAlert);\n}\n\n/**\n * Reset Filter and Place Advertisement forms\n */\nconst resetForms = () => {\n  adForm.reset();\n  filterForm.reset();\n\n  map.closePopup();\n  mainPinMarker.setLatLng(MapConfig.TOKYO);\n\n  // instead of mainPinMarker.fire('moveend');\n  setAddress(MapConfig.TOKYO);\n\n  // instead of map.setView(...);\n  map.flyTo(MapConfig.TOKYO, MapConfig.MAX_ZOOM_LEVEL);\n};\n\n/**\n * Callback when user clicks \"Reset\" button\n *\n * @param Event evt\n */\nconst resetButtonClickHandler = (evt) => {\n  evt.preventDefault();\n\n  resetForms();\n}\n\nconst contentLoadHandler = () => {\n  initMap();\n\n  resetButton.addEventListener('click', resetButtonClickHandler);\n\n  setAdFormSubmit(() => {\n    resetForms();\n    openModalSuccess();\n  }, openModalError);\n\n  setAdFormListeners();\n}\n\ndocument.addEventListener('DOMContentLoaded', contentLoadHandler);\n"],"names":["FILE_TYPES","avatarChooser","document","querySelector","avatarPreview","photoChooser","photoContainer","checkFile","file","fileName","name","toLowerCase","some","ext","endsWith","addEventListener","files","reader","FileReader","src","result","readAsDataURL","img","createElement","width","height","alt","appendChild","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","formatNumber","x","sep","toString","replace","ModalType","currentModal","modalKeydownHandler","evt","key","isEscEvent","preventDefault","closeModal","modalClickHandler","openModal","modalType","modal","content","cloneNode","body","className","removeEventListener","remove","openModalError","ERR_DATA_NOT_LOADED","ERR_REQUIRED_FIELD","Price","priceMap","bungalow","flat","house","palace","Capacity","NO_GUESTS","ERR_CAPACITY","adForm","titleField","housingTypeField","priceField","timeInField","timeOutField","roomsField","guestsField","maxPrice","max","minPrice","min","updateMinPrice","value","placeholder","syncTimeInOut","timeFieldChanged","timeFieldToChange","timeToChangeOption","options","selected","getCustomErrorMessage","field","errorMessage","validity","valueMissing","tooShort","length","getTitleErrorMessage","rangeUnderflow","rangeOverflow","getPriceErrorMessage","roomsNumber","Number","selectedIndex","allowedCapacity","capacity","includes","checkCapacity","inputHandler","target","reportValidity","invalidHandler","setCustomValidity","titleInputHandler","titleInvalidHandler","housingTypeChangeHandler","priceInputHandler","priceInvalidHandler","roomsChangeHandler","guestsChangeHandler","guestsInvalidHandler","timeInChangeHandler","timeOutChangeHandler","housingType","cardTemplate","priceDescription","textContent","hideElement","element","classList","add","MapConfig","TOKYO","MAX_ZOOM_LEVEL","CANVAS_ID","MAIN_PIN_URL","MAIN_ICON_SIZE","MAIN_ICON_ANCHOR","PIN_URL","ICON_SIZE","ICON_ANCHOR","PRECISION","DEFAULT_FILTER_CB","FilterId","TYPE","PRICE","ROOMS","GUESTS","FEATURES","filterAdBy","filterIds","Object","values","priceTypeToRange","filterForm","addrField","resetButton","featureFields","querySelectorAll","mainPinIcon","L","icon","iconUrl","iconSize","iconAnchor","mainPinMarker","marker","draggable","pinIcon","map","pinLayerGroup","showAlert","message","alertContainer","style","zIndex","position","left","top","right","padding","fontSize","textAlign","backgroundColor","append","setTimeout","setAdFormDisabledTo","isDisabled","disabled","forEach","setFilterFormDisabledTo","setAddress","addr","join","mapLoadHandler","initMainPinMarker","initPinMarkers","mainPinMarkerMoveEndHandler","targetCoords","getLatLng","lat","toFixed","lng","addTo","on","filterAd","ad","every","filterId","showPinMarkers","ads","clearLayers","layerGroup","filter","slice","pinMarker","location","bindPopup","card","price","featuresList","features","photos","photoTemplate","photosFragment","createDocumentFragment","title","address","type","time","description","avatar","offer","rooms","guests","checkin","checkout","feature","photoUrl","photo","author","renderAd","addLayer","onSuccess","onError","cb","timeout","timeoutId","args","clearTimeout","debounce","closePopup","filterValue","filterValues","featureField","checked","push","getFeaturesChecked","id","err","createFilterCb","updateFilter","fetch","then","response","ok","json","catch","resetForms","reset","setLatLng","flyTo","resetButtonClickHandler","setView","tileLayer","attribution","method","sendData","FormData"],"sourceRoot":""}