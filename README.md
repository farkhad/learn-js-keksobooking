<div class="up-project__info"><h3 class="up-project__caption">Техническое задание</h3><div class="up-project__specification text-container text-container--module text-container--specification" id="specification"><h4 id="о-проекте">О&nbsp;проекте</h4><p>Кексобукинг&nbsp;— сервис размещения объявлений о&nbsp;сдаче в&nbsp;аренду недвижимости в&nbsp;центре Токио. Пользователям предоставляется возможность размещать объявления о&nbsp;своей недвижимости или просматривать уже размещённые объявления.</p><h4>Описание функциональности</h4><h4 id="keksobooking-1"><a href="#keksobooking-1">1.</a> Состояния страницы</h4><ul><li id="keksobooking-1-1"><a href="#keksobooking-1-1">1.1. Неактивное состояние.</a> При открытии страница находится в&nbsp;неактивном состоянии:
    <ul><li>На&nbsp;месте карты отображается серый прямоугольник.</li><li>Форма заполнения информации об&nbsp;объявлении <code>.ad-form</code> содержит класс <code>ad-form--disabled</code>; <mark style="display: none;">старое_ДЗ-4-1</mark></li><li>Все интерактивные элементы формы <code>.ad-form</code> должны быть заблокированы с&nbsp;помощью атрибута <code>disabled</code>, добавленного на&nbsp;них или на&nbsp;их&nbsp;родительские блоки <code>fieldset</code>; <mark style="display: none;">старое_ДЗ-4-1</mark></li><li>Форма с&nbsp;фильтрами <code>.map__filters</code> заблокирована так&nbsp;же, как и&nbsp;форма <code>.ad-form</code>&nbsp;— на&nbsp;форму добавлен специальный класс, а&nbsp;на&nbsp;её&nbsp;интерактивные элементы атрибуты <code>disabled</code>. <mark style="display: none;">старое_ДЗ-4-1</mark></li></ul></li><li id="keksobooking-1-2"><a href="#keksobooking-1-2">1.2. Активное состояние.</a> Загрузка и&nbsp;успешная инициализация карты (карта реализуется сторонней библиотекой Leaflet) переводит страницу в&nbsp;активное состояние.
    В&nbsp;активном состоянии страница позволяет:
      <ul><li>Вносить изменения в&nbsp;форму и&nbsp;отправлять её&nbsp;на&nbsp;сервер;</li><li>После загрузки данных с&nbsp;сервера просматривать похожие объявления на&nbsp;карте, фильтровать их&nbsp;и&nbsp;уточнять подробную информацию о&nbsp;них, показывая для каждого из&nbsp;объявлений карточку. <mark style="display: none;">старое_ДЗ-4-1 (только взаимодействие)</mark><mark style="display: none;">старое_ДЗ-5-2</mark><mark style="display: none;">старое_ДЗ-4-1 (только переход, остальное отдельными пунктами)</mark></li></ul></li></ul><h4 id="keksobooking-2"><a href="#keksobooking-2">2.</a> Заполнение информации</h4><ul><li id="keksobooking-2-1"><a href="#keksobooking-2-1">2.1.</a> Заполнение информации и&nbsp;отправка данных:
    <ul><li>фотография пользователя; <mark style="display: none;">старое_ДЗ-4-2</mark></li><li>заголовок; <mark style="display: none;">старое_ДЗ-4-2</mark></li><li>адрес (координаты); <mark style="display: none;">старое_ДЗ-4-1</mark><mark style="display: none;">старое_ДЗ-4-2</mark><mark style="display: none;">старое_ДЗ-5-2</mark></li><li>тип жилья; <mark style="display: none;">старое_ДЗ-4-2</mark></li><li>цена за&nbsp;ночь; <mark style="display: none;">старое_ДЗ-4-2</mark></li><li>количество комнат; <mark style="display: none;">старое_ДЗ-4-1</mark></li><li>количество спальных мест; <mark style="display: none;">старое_ДЗ-4-1</mark></li><li>время заезда и&nbsp;выезда из&nbsp;квартиры; <mark style="display: none;">старое_ДЗ-4-2</mark></li><li>дополнительные параметры: <mark style="display: none;">старое_ДЗ-4-2</mark><ul><li>парковка;</li><li>WiFi;</li><li>кондиционер;</li><li>кухня;</li><li>стиральная машина;</li><li>лифт.</li></ul></li><li>свободное текстовое описание; <mark style="display: none;">старое_ДЗ-4-2</mark></li><li>фотография жилья. <mark style="display: none;">старое_ДЗ-4-2</mark></li></ul></li><li id="keksobooking-2-2"><a href="#keksobooking-2-2">2.2.</a> Заполнение всей информации производится на&nbsp;одной странице без промежуточных переходов. Порядок заполнения информации не&nbsp;важен.</li><li id="keksobooking-2-3"><a href="#keksobooking-2-3">2.3.</a> После заполнения всех данных, при нажатии на&nbsp;кнопку «Опубликовать», все данные из&nbsp;формы, включая изображения, с&nbsp;помощью AJAX-запроса отправляются на&nbsp;сервер <a href="https://23.javascript.pages.academy/keksobooking">https://23.javascript.pages.academy/keksobooking</a> методом <code>POST</code> с&nbsp;типом <code>multipart/form-data</code>. <mark style="display: none;">старое_ДЗ-4-1 (без AJAX)</mark><mark style="display: none;">старое_ДЗ-6-2</mark></li><li id="keksobooking-2-4"><a href="#keksobooking-2-4">2.4.</a> Страница реагирует на&nbsp;неправильно введённые значения в&nbsp;форму. Если данные, введённые в&nbsp;форму, не&nbsp;соответствуют ограничениям, указанным в&nbsp;<a href="#keksobooking-3">разделе</a>, описывающем поля ввода, форму невозможно отправить на&nbsp;сервер. При попытке отправить форму с&nbsp;неправильными данными, отправки не&nbsp;происходит, а&nbsp;неверно заполненные поля подсвечиваются красной рамкой. Способ добавления рамки и&nbsp;её&nbsp;стиль произвольные. <mark style="display: none;">старое_ДЗ-6-2</mark></li><li id="keksobooking-2-5"><a href="#keksobooking-2-5">2.5.</a> При успешной отправке формы или её&nbsp;очистке (нажатие на&nbsp;кнопку <code>.ad-form__reset</code>) страница, не&nbsp;перезагружаясь, переходит в&nbsp;состояние, когда: <mark style="display: none;">старое_ДЗ-6-2</mark><ul><li>все заполненные поля возвращаются в&nbsp;изначальное состояние;</li><li>фильтрация (состояние фильтров и&nbsp;отфильтрованные метки) сбрасывается;</li><li>метка адреса возвращается в&nbsp;исходное положение;</li><li>значение поля адреса корректируется соответственно исходному положению метки.</li></ul></li><li id="keksobooking-2-6"><a href="#keksobooking-2-6">2.6.</a> Если отправка данных прошла успешно, показывается соответствующее сообщение. Разметку сообщения, которая находится блоке <code>#success</code> внутри шаблона <code>template</code>, нужно разместить перед закрывающим тегом <code>&lt;/body&gt;</code>. Сообщение должно исчезать по&nbsp;нажатию на&nbsp;клавишу <code>Esc</code> и&nbsp;по&nbsp;клику на&nbsp;произвольную область экрана. <mark style="display: none;">старое_ДЗ-6-2</mark></li><li id="keksobooking-2-7"><a href="#keksobooking-2-7">2.7.</a> Если при отправке данных произошла ошибка запроса, показывается соответствующее сообщение. Разметку сообщения, которая находится в&nbsp;блоке <code>#error</code> в&nbsp;шаблоне <code>template</code>, нужно разместить перед закрывающим тегом <code>&lt;/body&gt;</code>. Сообщение должно исчезать после нажатия на&nbsp;кнопку <code>.error__button</code>, по&nbsp;нажатию на&nbsp;клавишу <code>Esc</code> и&nbsp;по&nbsp;клику на&nbsp;произвольную область экрана. <b>В&nbsp;таком случае вся введённая пользователем информация сохраняется, чтобы у&nbsp;него была возможность отправить форму повторно.</b><mark style="display: none;">старое_ДЗ-6-2</mark></li></ul><h4 id="keksobooking-3"><a href="#keksobooking-3">3.</a> Ограничения, накладываемые на&nbsp;поля ввода</h4><ul><li id="keksobooking-3-1"><a href="#keksobooking-3-1">3.1.</a> Заголовок объявления: <mark style="display: none;">старое_ДЗ-4-2</mark><ul><li>Обязательное текстовое поле;</li><li>Минимальная длина&nbsp;— 30 символов;</li><li>Максимальная длина&nbsp;— 100 символов.</li></ul></li><li id="keksobooking-3-2"><a href="#keksobooking-3-2">3.2.</a> Цена за&nbsp;ночь: <mark style="display: none;">старое_ДЗ-4-2</mark><ul><li>Обязательное поле;</li><li>Числовое поле;</li><li>Максимальное значение&nbsp;— 1 000 000.</li></ul></li><li id="keksobooking-3-3"><a href="#keksobooking-3-3">3.3.</a> Поле «Тип жилья» влияет на&nbsp;минимальное значение поля «Цена за&nbsp;ночь»: <mark style="display: none;">старое_ДЗ-4-2</mark><ul><li>«Бунгало»&nbsp;— минимальная цена за&nbsp;ночь 0;</li><li>«Квартира»&nbsp;— минимальная цена за&nbsp;ночь 1 000;</li><li>«Отель»&nbsp;— минимальная цена за&nbsp;ночь 3 000;</li><li>«Дом»&nbsp;— минимальная цена 5 000;</li><li>«Дворец»&nbsp;— минимальная цена 10 000.</li></ul></li></ul><blockquote><strong>Обратите внимание:</strong> вместе с&nbsp;минимальным значением цены нужно изменять и&nbsp;плейсхолдер.
</blockquote><blockquote><strong>Обратите внимание:</strong> ограничение минимальной цены заключается именно в&nbsp;изменении минимального значения, которое можно ввести в&nbsp;поле с&nbsp;ценой, изменять само значение поля не&nbsp;нужно, это приведёт к&nbsp;плохому UX&nbsp;(опыту взаимодействия). Даже если текущее значение не&nbsp;попадает под новые ограничения, не&nbsp;стоит без ведома пользователя изменять значение поля.
</blockquote><ul><li id="keksobooking-3-4"><a href="#keksobooking-3-4">3.4.</a> Адрес: ручное редактирование поля запрещено. Значение автоматически выставляется при перемещении специальной метки по&nbsp;карте. Подробности заполнения поля адреса описаны вместе с&nbsp;поведением метки. <mark style="display: none;">старое_ДЗ-4-2 (редактирование руками)</mark><mark style="display: none;">старое_ДЗ-5-2</mark></li><li id="keksobooking-3-5"><a href="#keksobooking-3-5">3.5.</a> Поля «Время заезда» и&nbsp;«Время выезда» синхронизированы: при изменении значения одного поля во&nbsp;втором выделяется соответствующее ему значение. Например, если время заезда указано «после 14», то&nbsp;время выезда будет равно «до&nbsp;14» и&nbsp;наоборот. <mark style="display: none;">старое_ДЗ-4-2</mark></li><li id="keksobooking-3-6"><a href="#keksobooking-3-6">3.6.</a> Поле «Количество комнат» синхронизировано с&nbsp;полем «Количество мест» таким образом, что при выборе количества комнат вводятся ограничения на&nbsp;допустимые варианты выбора количества гостей: <mark style="display: none;">старое_ДЗ-4-1</mark><ul><li>1 комната&nbsp;— «для 1 гостя»;</li><li>2 комнаты&nbsp;— «для 2 гостей» или «для 1 гостя»;</li><li>3 комнаты&nbsp;— «для 3 гостей», «для 2 гостей» или «для 1 гостя»;</li><li>100 комнат&nbsp;— «не&nbsp;для гостей».</li></ul></li></ul><blockquote><strong>Обратите внимание:</strong> допускаются разные способы ограничения допустимых значений поля «Количество мест»: удаление из&nbsp;разметки соответствующих элементов <code>option</code>, добавление элементам <code>option</code> состояния <code>disabled</code> или другие способы ограничения, например, с&nbsp;помощью метода <code>setCustomValidity</code>.
</blockquote><ul><li id="keksobooking-3-7"><a href="#keksobooking-3-7">3.7.</a> Значением полей «Ваша фотография» и&nbsp;«Фотография жилья» может быть только изображение. <mark style="display: none;">старое_ДЗ-4-2</mark></li></ul><h4 id="keksobooking-4"><a href="#keksobooking-4">4.</a> Выбор адреса на&nbsp;карте:</h4><ul><li id="keksobooking-4-1"><a href="#keksobooking-4-1">4.1.</a> Приблизительный адрес квартиры указывается перемещением специальной метки по&nbsp;карте Токио. Содержимое поля адреса должно всегда соответствовать координатам метки.</li><li id="keksobooking-4-2"><a href="#keksobooking-4-2">4.2.</a> Поле адреса должно быть заполнено всегда, в&nbsp;том числе сразу после активации страницы. По&nbsp;умолчанию используются координаты центра Токио. <mark style="display: none;">старое_ДЗ-4-1</mark></li><li id="keksobooking-4-3"><a href="#keksobooking-4-3">4.3.</a> Формат значения поля адреса: <code>lat, lng</code>, где <code>lat</code> и&nbsp;<code>lng</code>&nbsp;— это координаты метки (от&nbsp;англ. latitude и&nbsp;longitude, широта и&nbsp;долгота). Данные предоставляются API карт. Дробные координаты округляются до&nbsp;пяти символов после запятой. <mark style="display: none;">старое_ДЗ-4-1 (только формат)</mark><mark style="display: none;">старое_ДЗ-5-2</mark></li></ul><h4 id="keksobooking-5"><a href="#keksobooking-5">5.</a> Сравнение с&nbsp;похожими объявлениями</h4><ul><li id="keksobooking-5-1"><a href="#keksobooking-5-1">5.1.</a> Полный список похожих объявлений загружается после перехода страницы в&nbsp;активное состояние с&nbsp;сервера <a href="https://23.javascript.pages.academy/keksobooking/data">https://23.javascript.pages.academy/keksobooking/data</a>. <b>Данные с&nbsp;сервера могут быть получены не&nbsp;в&nbsp;полном объёме.</b><mark style="display: none;">старое_ДЗ-6-1</mark></li><li id="keksobooking-5-2"><a href="#keksobooking-5-2">5.2.</a> Если при загрузке данных с&nbsp;сервера произошла ошибка запроса, нужно показать соответствующее сообщение. Дизайн блока с&nbsp;сообщением нужно придумать самостоятельно. <mark style="display: none;">старое_ДЗ-6-1</mark></li><li id="keksobooking-5-3"><a href="#keksobooking-5-3">5.3.</a> Каждое из&nbsp;объявлений показывается на&nbsp;карте в&nbsp;виде метки. Размеры метки похожего объявления&nbsp;— 40 на&nbsp;40, размеры специальной метки выбора адреса&nbsp;— 52 на&nbsp;52. <mark style="display: none;">старое_ДЗ-3-1</mark></li><li id="keksobooking-5-4"><a href="#keksobooking-5-4">5.4.</a> При нажатии на&nbsp;метку похожего объявления, показывается балун (предоставляется API карт) с&nbsp;подробной информацией об&nbsp;объявлении (далее&nbsp;— карточка). Разметка карточки должна создаваться на&nbsp;основе шаблонного элемента <code>.popup</code>, расположенного в&nbsp;элементе <code>template</code> с&nbsp;идентификатором <code>#card</code>. Данные в&nbsp;карточку вставляются по&nbsp;аналогии с&nbsp;данными, вставленными в&nbsp;шаблонную карточку в&nbsp;качестве примера. <b>Если данных для заполнения не&nbsp;хватает, соответствующий блок в&nbsp;карточке скрывается. Например, если в&nbsp;объявлении не&nbsp;указано никаких удобств, нужно скрыть блок <code>.popup__features</code>. При отсутствии полей не&nbsp;должно возникать ошибок.</b><mark style="display: none;">старое_ДЗ-3-2 (показ первого без нажатия)</mark><mark style="display: none;">старое_ДЗ-4-2</mark></li><li id="keksobooking-5-5"><a href="#keksobooking-5-5">5.5.</a> Нажатие на&nbsp;специальную метку выбора адреса не&nbsp;приводит к&nbsp;показу балуна. <mark style="display: none;">старое_ДЗ-4-2</mark></li><li id="keksobooking-5-6"><a href="#keksobooking-5-6">5.6.</a> В&nbsp;каждый момент времени может быть показан только один балун, то&nbsp;есть нажатие на&nbsp;метку другого похожего объявления должно скрывать текущий балун, если он&nbsp;показан и&nbsp;показывать балун, соответствующий другому объявлению. <mark style="display: none;">старое_ДЗ-4-2</mark></li><li id="keksobooking-5-7"><a href="#keksobooking-5-7">5.7.</a> Открытую карточку с&nbsp;подробной информацией можно закрыть нажатием на&nbsp;крестик в&nbsp;углу балуна. <mark style="display: none;">старое_ДЗ-4-2</mark></li><li id="keksobooking-5-8"><a href="#keksobooking-5-8">5.8.</a> Объекты, расположенные неподалёку, можно фильтровать. Фильтрация производится при изменении значений соответствующих полей формы <code>.map__filters</code> по&nbsp;тем&nbsp;же параметрам, которые указываются для объявления:
    <ul><li>тип жилья; <mark style="display: none;">старое_ДЗ-7-1</mark></li><li>цена за&nbsp;ночь; <mark style="display: none;">старое_ДЗ-7-2</mark></li><li>число комнат; <mark style="display: none;">старое_ДЗ-7-2</mark></li><li>число гостей; <mark style="display: none;">старое_ДЗ-7-2</mark></li><li>дополнительные удобства. <mark style="display: none;">старое_ДЗ-7-2</mark></li></ul></li><li id="keksobooking-5-9"><a href="#keksobooking-5-9">5.9.</a> Как до&nbsp;изменения фильтров, так и&nbsp;при изменении фильтра, на&nbsp;карте должны показываться все подходящие варианты, но&nbsp;не&nbsp;более 10 меток (не&nbsp;считая специальной), независимо от&nbsp;выбранного фильтра. Показанные метки должны удовлетворять всем выбранным фильтрам. <mark style="display: none;">старое_ДЗ-7-1</mark></li><li id="keksobooking-5-10"><a href="#keksobooking-5-10">5.10.</a> Форма, с&nbsp;помощью которой производится фильтрация похожих объявлений на&nbsp;момент открытия страницы, заблокирована и&nbsp;становится доступной только после окончания загрузки всех похожих объявлений, которые в&nbsp;свою очередь начинают загружаться только после загрузки и&nbsp;успешной инициализации карты. <mark style="display: none;">старое_ДЗ-7-1</mark></li><li id="keksobooking-5-11"><a href="#keksobooking-5-11">5.11.</a> Отрисовка соответствующих выбранным фильтрам меток должна происходить не&nbsp;чаще, чем раз в&nbsp;полсекунды (устранение дребезга). <mark style="display: none;">старое_ДЗ-7-2</mark></li><li id="keksobooking-5-12"><a href="#keksobooking-5-12">5.12.</a> При изменении фильтров открытый балун (при наличии) должен быть скрыт. <mark style="display: none;">старое_ДЗ-7-1</mark></li></ul><h4 id="keksobooking-6"><a href="#keksobooking-6">6.</a> Необязательная функциональность</h4><ul><li id="keksobooking-6-1"><a href="#keksobooking-6-1">6.1.</a> В&nbsp;форме подачи объявления показывается превью аватарки пользователя и&nbsp;фотографии помещения при изменении значений соответствующих полей. <mark style="display: none;">старое_ДЗ-9-1</mark></li></ul></div></div>
